<% content_for :title, "News Feed" %>

<%= render 'shared/left_sidebar' %>

<section class="col-sm-6">
  <% if current_user.has_image? %>
    <div class="text-right muted"><span id="postCharCount">0</span>/250</div>
    <%= form_for @new_post, html: { class:"clearfix position-relative" } do |f| %>
      <div class="row">
        <%= link_to current_user, class:'no-hover col-xs-2' do %>
          <%= profile_picture(current_user) %>
        <% end %>
        <div class="col-xs-10">
          <%= f.text_area :content, class:"col-sx-8 form-control post-textarea", placeholder:"Post your questions and expertise to our network of lenders and owners . . .", id:"newPostContent" %>
        </div>
      </div>
      <section class="row">
        <div class="col-xs-8 col-xs-offset-2">
          <%= f.text_field :tag_list, class:"form-control", placeholder:"Keywords (separated by comma)" %>
        </div>
        <div class="col-xs-2">
          <%= f.submit "Post", class:"btn btn-success post-btn", id:"submitPost" %>
        </div>
      </section>
    <% end %>
  <% else %>
    <div class="well alert-info" id="fadeInAlert">
      <div class="col-sm-2">
        <%= image_tag 'default_profile_pic.png', class:"img-circle", width:50 %>
      </div>
      <p><i class="icon ion-ios7-bell"></i> To post to the Newsfeed you must first</p>
      <%= link_to "Upload a profile picture", edit_profile_path(current_user) %>, or <a href="/auth/linkedin" class="auth_provider">Fetch it through LinkedIn</a> 
    </div>
  <% end %>
  <div class="hr-line"></div>
  <%= render partial: "posts/post", collection: @posts, as: :post %>
  <%= will_paginate @posts, renderer: BootstrapPagination::Rails %>
</section>

<%= render 'shared/right_sidebar' %>
